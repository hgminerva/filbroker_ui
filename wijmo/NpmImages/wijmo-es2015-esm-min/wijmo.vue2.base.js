/*!
    *
    * Wijmo Library 5.20192.631
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

import{isArray,Control,isUndefined,isFunction}from"wijmo/wijmo";import*as VueModule from"vue";import VueModuleDefault from"vue";export var Vue=VueModuleDefault||VueModule;export var WjVueBase=Vue.extend({beforeCreate:function(){let t=this.$options[WjComponentBehavior._behClassProp];t&&(this[WjComponentBehavior._behProp]=t._attach(this))},mounted:function(){this[WjComponentBehavior._behProp].lhMounted()},destroyed:function(){this[WjComponentBehavior._behProp].lhDestroyed()}});export class WjComponentBehavior{constructor(t){this._isMounted=!1,this._mountedCBs=[],this.component=t}static _attach(t){return new this(t)}static register(){let t={data:this.data,extends:WjVueBase,render:this.render,props:this._getProps(),[WjComponentBehavior._behClassProp]:this};return Vue.component(this.tag,t)}lhMounted(){if(this._isChild()){let t=this.component.$parent;t&&(this.parent=t[WjComponentBehavior._behProp],this.parent._mountedCB(()=>{this._prepareControl(),this._initParent()}))}else this._prepareControl()}lhDestroyed(){this._siblingInsertedEH&&this._getElement().removeEventListener("DOMNodeInserted",this._siblingInsertedEH);let t=this.control;if(t)if(this._isChild()){let e=this._getParentProp();if(e){let i=this.parent.control[e];if(isArray(i)){let e=i.indexOf(t);e>-1&&i.splice(e,1)}}}else t instanceof Control&&t.dispose()}static _getProps(){let t=[];return this.props&&(t=this.props),this.events&&(t=t.concat(this.events)),this.changeEvents&&(t=t.concat(Object.keys(this.changeEvents))),t}_createControl(){let t=this._isChild()?this._isParentInCtor()?this.parent.control:void 0:this._getElement();return new(this.constructor._getControlType())(t)}_initParent(){let t=this._getParentProp();if(t){let e=this.parent.control,i=e[t];if(isArray(i)){let t=this._getSiblingIndex();(t<0||t>=i.length)&&(t=i.length),i.splice(t,0,this.control),this._siblingInsertedEH=this._siblingInserted.bind(this),this._getElement().addEventListener("DOMNodeInserted",this._siblingInsertedEH)}else e[t]=this.control}}_updateControl(t,e){this.control[t]=e}_prepareControl(){this.control=this._createControl();let t=this._getElement(),e=this.constructor;this._siblingId||(null==e.siblingId&&(e.siblingId=++e._siblingDirId+""),this._siblingId=e.siblingId),t.setAttribute(e._typeSiblingIdAttr,this._siblingId),this._isMounted=!0;let i=this._mountedCBs;this._mountedCBs=[];for(let t of i)t();_initialize(this)}_isChild(){let t=this.constructor;return null!=t.parentProp||null!=t.parentInCtor}_isParentInCtor(){return!0===this.constructor.parentInCtor}_getParentProp(){return this.component.$options.propsData.wjProperty||this.constructor.parentProp}_getSiblingIndex(){var t=this._getElement(),e=t.parentElement;if(!e)return-1;for(var i=e.childNodes,n=-1,o=this._siblingId,r=0;r<i.length;r++){var s=i[r];if(1==s.nodeType&&s.getAttribute(WjComponentBehavior._typeSiblingIdAttr)==o&&(++n,s===t))return n}return-1}_siblingInserted(t){if(t.target===this._getElement()){var e=this._getSiblingIndex(),i=this.control,n=this.parent.control[this._getParentProp()],o=n.indexOf(i);e>=0&&o>=0&&e!==o&&(n.splice(o,1),e=Math.min(e,n.length),n.splice(e,0,i))}}_getElement(){return this.component.$el}static _getControlType(){return this.classCtor()}_mountedCB(t){this._isMounted?t():this._mountedCBs.push(t)}};WjComponentBehavior.render=function(t){return t("div",[this.$slots.default])},WjComponentBehavior._typeSiblingIdAttr="_wjSiblingId",WjComponentBehavior._behClassProp="_wjBehCl",WjComponentBehavior._behProp="__wjBeh",WjComponentBehavior._propIdxMapProp="__propInitIdx",WjComponentBehavior._siblingDirId=0;export function _initialize(t){let e=t.component,i=t.control,n=t.constructor,o=n[WjComponentBehavior._propIdxMapProp];if(!o){o=n[WjComponentBehavior._propIdxMapProp]={};let t=n.props;if(t)for(let e=0;e<t.length;e++)o[t[e]]=e}var r=[],s=[];for(var h in e.$options.propsData)null!=o[h]?r.push(h):s.push(h);r.sort((t,e)=>o[t]-o[e]);e[WjComponentBehavior._behProp].constructor.extraProps;var l,p;return r.forEach(t=>{isUndefined(e[t])||e[WjComponentBehavior._behProp]._updateControl(t,e[t]),e.$watch(t,function(t){this.cmp[WjComponentBehavior._behProp]._updateControl(this.prop,t)}.bind({cmp:e,prop:t}))}),l=e.$el,p={},"style"in i&&l.style.cssText.length&&(l.style.cssText.split(";").forEach(t=>{var e=t.split(":");2==e.length&&(p[e[0].trim()]=e[1].trim())}),i.style=p),s.forEach(t=>{"initialized"!==t&&t.indexOf(".")<0&&isFunction(e[t])&&i[t].addHandler(e[t],i)}),e.control&&e.$parent&&(e.$parent[e.control]=i),isFunction(e.initialized)&&e.initialized(i),i};